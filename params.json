{"name":"Mysb","tagline":"My SeedBox","body":"====\r\n#### This script is not intended to solicit illegal actions! I can not be held responsible for the use that you could doing it! Thank you to reconsider the installation and use of MySB. I developed this script only for pleasure and passion for my job.\r\n====\r\nMy SeedBox\r\n====\r\n\r\nThis script is a fork of Notos' Script (base v2.1.9) avaible at https://github.com/Notos/seedbox-from-scratch/, combined with tuto of Mondedie.fr avaible at \"http://mondedie.fr/viewtopic.php?id=5302\".\r\n\r\nMySB is a seedbox platform for multi-users.\r\n\r\n##### Current version = v1.1\r\n###### Last stable version = v1.1\r\n\r\n## Installed software\r\n\r\n\t* rTorrent (rakshasa) v0.9.2 with SSL\r\n\t* libTorrrent (rakshasa) v13.2\r\n\t* ruTorrent (SVN) + official plugins (SVN)\r\n\t* NginX (SSL, specific port and some customizations)\r\n\t* PHP5-FPM (php5-apcu, FastCGI, SSL)\r\n\t* SFTP with Chroot\r\n\t* vsftpd (TLS)\r\n\t* Postfix with SMTP authentication (Gmail, Free, Ovh and Yahoo)\r\n\r\n## Services available\r\n\r\n\t* Fail2ban (optionnal but recommended)\r\n\t* Seedbox-Manager (optionnal but recommended)\r\n\t* OpenVPN (optionnal); Multi TUN configuration, with or without redirection of traffic. Add AES-NI support (Not valid for OpenVZ Container).\r\n\t* Webmin (optionnal)\r\n\t* BlockList usage (optionnal) (PeerGuardian or rTorrent)\r\n\t* CakeBoxLight (optionnal)\r\n\t* PlexMedia Server (optionnal)\r\n\t* Samba share for each users (VPN access)\r\n\t* NFS share for each users (VPN access)\r\n\t* Get SSL certificates for each tracker avaible with ruTorrent\r\n\r\n## Additional ruTorrent plugins\r\n\r\n\t* Chat\r\n\t* Logoff\r\n\t* tAdd-Labels\r\n\t* Filemanager\r\n\t* Mediastream\r\n\t* Fileshare\r\n\t* NFO\r\n\t* RatioColor\r\n\t* Theme: Oblivion\r\n\t* FileUpload\r\n\t* Stream\r\n\t* Favicons trackers\r\n\r\n## Some custom settings\r\n\t\r\n\t* Using of DNSCrypt with Bind9 as dns caching\r\n\t\r\n## Before installation\r\n\r\nYou need to have a \"blank\" server installation.\r\nAfter that access your box using a SSH client, like PuTTY.\r\n\r\n#################\r\n#\tWarnings\t#\r\n#################\r\n\r\n#### OpenVZ Containers\r\n--> PeerGuardian, it's not possible to install it in your OpenVZ Container.\r\n```\r\nModule 'xt_mark' is mandatory for PeerGuardian. Currently, I have not found solution. The subject is pending.\r\n```\r\n--> OpenVPN, you must follow this link BEFORE install 'MySB'.\r\n```\r\nhttps://openvpn.net/index.php/access-server/docs/admin-guides/186-how-to-run-access-server-on-a-vps-container.html\r\n```\r\n\r\n###### NOTE: You must have a swap partition for systems with less than 2GB of RAM!\r\n\r\n\t--> Your swap partition should be at least equal to your RAM.\r\n\r\n###### NOTE: If you don't know Linux ENOUGH:\r\n\r\n\t--> DO NOT use capital letters, all your usernames should be written in lowercase.\r\n\t--> DO NOT upgrade anything in your box, ask in the thread before even thinking about it.\r\n\t--> DO NOT try to reconfigure packages using other tutorials.\r\n\t\r\n#################\r\n\t\r\n## How to install\r\nJust copy and paste those commands on your terminal:\r\n```\r\nwget --no-check-certificate -N https://raw.githubusercontent.com/toulousain79/MySB/v1.1/MySB_Install.sh\r\nbash MySB_Install.sh\r\n```\r\n\r\nIf you lose connection during installation, restart the SSH session and run the following command:\r\n```\r\nscreen -r MySB\r\n```\r\nBeware, during installation, the SSH port will be changed. If a port session 22 does not work, try with the new port that you have selected.\r\n\r\n###### NOTE 1: You must be logged as root to run this installation or use sudo.\r\n###### NOTE 2: At the end of the installation, the server will restart automatically and you will receive an e-mail summarizing.\r\n###### NOTE 3: The first thing to do once you have received the email, is to add your IPs and change the temporary password.\r\n\r\n## How to upgrade from v1.0\r\nJust copy and paste those commands on your terminal:\r\n```\r\nMySB_UpdateGitHubRepo\r\nMySB_UpgradeMe\r\n```\r\n\r\n## Commands\r\n\r\nAfter installing you will have access to the following commands to be used directly in terminal.\r\n\r\n\t* MySB_ChangeUserPassword\r\n\t* MySB_CreateUser\r\n\t* MySB_DeleteUser\r\n\t* MySB_UpdateGitHubRepo (update actual repository)\r\n\t* MySB_RefreshMe (refresh some parts of MySB)\r\n\t* MySB_UpgradeMe (to migrate to a new version of MySB)\r\n\t* MySB_UpgradeSystem (simply upgrade your system APT upgrade)\r\n\t\r\nNext scripts are avaible too.\r\n\t\r\n\t* '/etc/MySB/scripts/BlockList.sh', use this for generate blocklist for rTorrent with 'ipv4_filter.load' command.\r\n\t* '/etc/MySB/scripts/FirewallAndSecurity.sh [clean|new]', use this for generate all security options (PeerGuardian, IPtables, Fail2Ban, Nginx IP restricted access, ...)\r\n\t* '/etc/MySB/scripts/GetTrackersCert.sh', use this for get all SSL certificates for all tracker avaibled with ruTorrent. You can add more trackers in '/etc/MySB/inc/trackers'.\r\n\r\nYou can find others scripts in '/etc/MySB/scripts/'. This others scripts are added in cron job.\r\n\r\n###### NOTE: While executing them, if sudo is needed, they will ask for a password.\r\n\r\n## Services\r\n\r\nTo access services installed on your new server, point your browser to the following address:\r\n```\r\nhttps://<Server IP or Server Name>:<https NginX port>/MySB/SeedboxInfo.php\r\n```\r\n\r\n## Seedbox-Manager\r\n\r\nThe seedbox web-manager application is an interface to restart an rtorrent user session. \r\nIt is also not currently: \r\n\r\n\t* links to rutorrent and in Cakebox configurable navbar. \r\n\t* a reminder of ids ftp and sftp user. \r\n\t* a support module with deactivatable ticket. \r\n\t* server statistics (load average, uptime). \r\n\t* user information (disk space, visitor IP address). \r\n\t* a tool to generate configuration files filezilla and Transdroid. \r\n\t* a space administrator to easily manage the configuration of your users \r\n\t* A page parameter to disable the blocks you do not use. \r\n\r\nAuthor: backtoback (c) & Magicalex (php) & hydrog3n (php).\r\n```\r\nhttps://github.com/Magicalex/seedbox-manager/\r\n```\r\n\r\n## BlockList\r\nBlockList usage (optionnal), PeerGuardian or directly via rTorrent.\r\nDepending on your system, it is possible to use: \r\n\r\n#### PeerGuardian\r\n\r\n\t* By default, some list are activated. Check \"/etc/pgl/blocklists.list\".\r\n\t* Many tracker sites are allowed, but only private trackers. Check \"/etc/pgl/allow.p2p\".\r\n###### NOTE: Do not try to add your rtorrents ports in the list of incoming ports allowed in PeerGuardian (pglcmd.conf) !!!\r\n###### Using PeerGuardian will not have much sense ...\r\n###### Rather prefer permission trackers via the \"allow.p2p\" PeerGuardian file. To do this, edit the \"/etc/MySB/inc/trackers\" file and add only the domain of your tracker.\r\n###### Then use the command \"bash /etc/MySB/scripts/GetTrackersCert.sh.\" This will retrieve all SSL certificates (if available) and complete the list of PeerGuardian.\r\n\r\nOR\r\n\r\n#### rTorrent with ipv4_filter.load\r\n\r\n\t* By default, some list are activated. Check \"/etc/MySB/inc/blocklist\".\r\n\t* All list are avaible in \"/etc/MySB/inc/blocklist\".\r\n\t* Comment the line with '#' if you want to exclude a list OR comment out the line with deleting '#' if you want to activate it.\r\n\t* Example: #BLUETACK_ADS=\"http://.....\" to exclude ADS Bluetack list.\t\r\n\t* And do \"bash /etc/MySB/scripts/BlockList.sh\" for generate the new list for each users.\r\n\r\n\tNB: The script compile one file with all list, and make cleaning rules.\r\n\tNB: Beware, if you have not enough memory, choising too many list will make you system very slow!\r\n\r\n\r\n## OpenVPN\r\n\r\nTo use your VPN you will need a VPN client compatible with [OpenVPN](http://openvpn.net/index.php?option=com_content&id=357), necessary files to configure your connection are in this link in your box:\r\n```\r\nhttp://<Server IP or Server Name>:<https NginX port>/MySB/OpenVPN.php` and use it in any OpenVPN client.\r\n```\r\n#### For OpenVZ, you must validate the prerequisites on this page first. Otherwise, OpenVPN will not be functional.\r\n```\r\nhttps://openvpn.net/index.php/access-server/docs/admin-guides/186-how-to-run-access-server-on-a-vps-container.html\r\n```\r\n##### NFS and Samba share with OpenVPN\r\nFor NFS, you can mount the /home/<username>/rtorrent like that. The IP address can be different depending on the OpenVPN configuration that you have selected.\r\n```\r\nmount -t nfs [10.0.0.1|10.0.1.1]:/home/<username>/rtorrent <mount_dir> -o  -o nocto,noacl,noatime,nodiratime,nolock,rsize=8192,vers=3,ro,udp\r\n```\r\nFor Samba, you can mount the /home/<username> like that. The IP address can be different depending on the OpenVPN configuration that you have selected.\r\n```\r\nmount - <mount_dir> -t cifs -o noatime,nodiratime,UNC=//[10.0.0.1|10.0.1.1]/<username>,username=<username>,password=<your_password>\r\n```\r\n\r\n###### NOTE: I personally use my router Asus RT-N16 (firmware TomatoUSB by Shibby) as OpenVPN client. From there, I mount the NFS share corresponding to my homedir on the MySB box.\r\nThen I add my mount point in the DLNA server on my RT-N16. \r\nMiracle, I can stream my files with my Freebox Revolution!\r\n\r\n## DNScrypt-proxy\r\nBy default, DNScrypt-proxy will use OpenDNS resolver (opendns). \r\nThe full list of DNScrypt resolvers is available at: https://github.com/jedisct1/dnscrypt-proxy/blob/master/dnscrypt-resolvers.csv \r\n\r\nIt is possible to change the resolver name at any time using the following command:\r\n```\r\ndnscrypt-proxy service restart <resolver_name>\r\n```\r\n\r\nTo clean Bind cache, just restart service.\r\n\r\n###### 1 - Clean Bind9 cache\r\n```\r\nservice bind9 restart\r\n```\r\n###### 2 - Change DNScrypt resolver name\r\n```\r\nservice dnscrypt-proxy restart dnscrypt.eu-nl\r\n```\r\n\r\n###### IMPORTANT: With OpenVZ container, to complete the installation of DNScrypt-proxy, you must replace your existing DNS config (/etc/resolv.conf), by the loopback address.\r\n###### IMPORTANT: It's necessary to make the change via the host (eg Proxmox), otherwise you will lose your configuration on next reboot. You must replace yours nameserver by 'nameserver 127.0.0.1' (/etc/resolv.conf).\r\n\r\n## Supported and tested servers\r\n\r\n#### Debian 7 - x86_64 (Wheezy)\r\n\r\n\t--> Tested on Online.net with \"DEDIBOX® SC GEN2\" and \"DEDIBOX® XC\"\r\n\t--> Tested on OpenVZ Container with ProxMox, work fine ! (read comment in top of this page)\r\n\t--> Tested on OVH with \"Kimsufi\"\r\n  \r\n#### Ubuntu or older Debian may worked, but not tested...\r\n\r\n\r\n## Changelog\r\n\r\nTake a look at 'Changelog.md', it's all there.\r\n\r\n\r\n## Support\r\n\r\nThere is no real support for this script.\r\n\r\n\r\n## License\r\n\r\nCreated by toulousain79\r\n\r\n--> Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php\r\n\r\n## Sources, inspiration and tools\r\n\r\n* Notos' script:\t\thttps://github.com/Notos/seedbox-from-scratch/\r\n* Mondedie.fr script:\t\thttps://bitbucket.org/exrat/install-rutorrent\t\r\n* rTorrent Community:\thttp://community.rutorrent.org/\t\r\n* rTorrent config info:\t\thttp://libtorrent.rakshasa.no/rtorrent/rtorrent.1.html\r\n* rTorrent tweaks:\t\thttps://calomel.org/rtorrent_mods.html\r\n* rTorrent SSL:\thttps://forums.gentoo.org/viewtopic-t-710876-start-0.html\r\n* OpenSSL configuration file:\thttp://www.eclectica.ca/howto/ssl-cert-howto.php\r\n* OpenSSL AES-NI support:\thttp://openssl.6102.n7.nabble.com/having-a-lot-of-troubles-trying-to-get-AES-NI-working-td44285.html\r\n* Text ASCII Art Generator:\thttp://patorjk.com/software/taag/\r\n* Why nginx-extras + infos:\thttps://wiki.debian.org/fr/Nginx\r\n* NginX config:\thttp://wiki.nginx.org/CoreModule#worker_rlimit_nofile\r\n* NginX config:\thttp://trac.evolix.net/infogerance/wiki/HowtoNginx\r\n* NginX config:\thttps://library.linode.com/web-servers/nginx/configuration/basic\r\n* NginX with SSL:\thttp://nginx.org/en/docs/http/configuring_https_servers.html\r\n* OpenSSL CAconfig:\thttp://www.ulduzsoft.com/2012/01/creating-a-certificate-authority-and-signing-the-ssl-certificates-using-openssl/\r\n* VSFTDs TLS:\thttp://www.howtoforge.com/setting-up-vsftpd-tls-on-debian-squeeze\r\n* VSFTPd Debian: https://howto.biapy.com/fr/debian-gnu-linux/serveurs/autres/installer-le-serveur-ftp-vsftpd-sur-debian\r\n* VSFTPd ManPage: https://security.appspot.com/vsftpd/vsftpd_conf.html\r\n* DNS Server:\thttp://en.m.wikipedia.org/wiki/Comparison_of_DNS_server_software\r\n* DNScrypt infos:\thttp://antix.freeforums.org/secure-dns-with-dnscrypt-t3588.html\r\n* DNScrypt + Bind9:\thttp://cavaencoreparlerdebits.fr/blog/2013/10/encrypt-your-dns-request-with-opendns-dnscrypt\r\n\r\n## TODO\r\n\r\n* Change ruTorrent directory name (/rutorrent/)\r\n* Maybe add miniDLNA functionality (with OpenVPN)\r\n* Make some thing for users with dynamic ip for update whitelist in PeerGuardian and Fail2ban.\r\n* Gmail SMTP https://www.google.com/accounts/DisplayUnlockCaptcha\r\n* Maybe add OwnCloud possiblity\r\n* Maybe use of SQLight\r\n* NFS over sTunnel ? (https://w3.physics.illinois.edu/physwiki/doku.php?id=pcs:unix:nfs_over_stunnel)\r\n* SABnzbd option ?\r\n* Subsonic option ?\r\n* Namebench ?\r\n* Maybe use of 'psad' and 'systemd'\r\n","google":"UA-53486968-1","note":"Don't delete this file! It's used internally to help with page regeneration."}